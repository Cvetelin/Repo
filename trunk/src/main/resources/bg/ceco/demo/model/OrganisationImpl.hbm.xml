<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping
	PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<!-- Generated by: AssociationEntityImplementation.vsl in boursorama-crm-domain-impl-cartridge. -->
	<!-- Facade: org.andromda.metafacades.uml14.EntityFacadeLogicImpl[Organisation] -->
	<!-- Association: $class.connectionAssociationEnds -->
	<class name="bg.ceco.demo.model.OrganisationImpl" table="CRM_ORGANISATION"
		discriminator-value="O">

		<id name="id" type="long" column="ORGANISATION_ID" unsaved-value="null">
			<generator class="native" />
		</id>

		<discriminator column="DISC" />

		<property name="actif" type="boolean" />

		<property name="nom" />
		
		<property name="type" column="DISC" generated="insert" insert="false" update="false"/>

		<subclass name="bg.ceco.demo.model.DepartementImpl" discriminator-value="D">
			<set name="services" table="CRM_DEPARTEMENT" inverse="true">
				<key column="ORGANISATION_ID" />
				<one-to-many class="bg.ceco.demo.model.ServiceImpl" />
			</set>

			<join table="CRM_DEPARTEMENT">
				<key column="DEPARTEMENT_ID" />
			</join>

		</subclass>

		<subclass name="bg.ceco.demo.model.ServiceImpl" discriminator-value="S">
			<join table="CRM_SERVICE">
				<key column="SERVICE_ID" />

				<many-to-one name="departement" class="bg.ceco.demo.model.DepartementImpl"
					cascade="save-update" column="DEPARTEMENT_ID" />
			</join>
		</subclass>
	</class>
</hibernate-mapping>
